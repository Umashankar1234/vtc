{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/Uma/vtc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/Users/user/Desktop/Uma/vtc/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect,useContext}from\"react\";import{Recorder}from'react-voice-recorder';import Snackbar from'@material-ui/core/Snackbar';import MuiAlert from'@material-ui/lab/Alert';import axios from\"axios\";import Dialog from'@material-ui/core/Dialog';import DialogTitle from'@material-ui/core/DialogTitle';import DialogContent from'@material-ui/core/DialogContent';import banner from\"../../../images/vtc-banner.jpg\";import Grid from'@material-ui/core/Grid';import DateFnsUtils from'@date-io/date-fns';import{MuiPickersUtilsProvider,KeyboardTimePicker,KeyboardDatePicker}from'@material-ui/pickers';import up_img from\"../../../images/up.png\";import middle_img from\"../../../images/middle.png\";import bottom_img from\"../../../images/bottom.png\";import man from\"../../../images/man.png\";import house_img from\"../../../images/house-img.jpg\";import CancelIcon from'@material-ui/icons/Cancel';import HighlightOffIcon from'@material-ui/icons/HighlightOff';import AddIcon from'@material-ui/icons/Add';import SaveIcon from'@material-ui/icons/Save';import Footer from\"../../../components/Footer/AgentFooter\";import AgentHeader from\"../Header/AgentHeader\";import Skeleton from'@material-ui/lab/Skeleton';import{Link,useHistory}from\"react-router-dom\";import{AuthContext}from\"../../../CommonMethods/Authentication\";import{APIURL,APIPath}from\"../../../CommonMethods/Fetch\";import{postRecord}from\"../../../CommonMethods/Save\";import logo from\"../../../images/wallpaper.jpg\";import photo from\"../../../images/photo.jpg\";import logo1 from\"../../../images/logo.jpg\";import html2PDF from'jspdf-html2canvas';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var APIGetViewFlyerData=APIURL()+\"view-flyer\";function Alert(props){return/*#__PURE__*/_jsx(MuiAlert,_objectSpread({elevation:6,variant:\"filled\"},props));}export default function AgentDownloadFlyer(props){var flyerId=props.match.params.flyerid;var _useContext=useContext(AuthContext),dispatch=_useContext.dispatch;var context=useContext(AuthContext);var history=useHistory();var _useState=useState(true),_useState2=_slicedToArray(_useState,2),sync=_useState2[0],setSync=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openError=_useState4[0],setOpenError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openSuccess=_useState6[0],setOpenSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),tourData=_useState10[0],setTourData=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),link=_useState12[0],setLink=_useState12[1];var handleClose=function handleClose(event,reason){if(reason==='clickaway'){return;}setOpenSuccess(false);setOpenError(false);};useEffect(function(){if(context.state.user){var objusr={authenticate_key:\"abcd123XYZ\",tourId:flyerId,agent_id:JSON.parse(context.state.user).agentId};postRecord(APIGetViewFlyerData,objusr).then(function(res){if(res.data[0].response.status===\"success\"){setTourData(res.data[0].response.tourData);setLink(res.data[0].response.tourData.tourid);}});}},[sync,context.state.user,flyerId]);useEffect(function(){if(Object.keys(tourData).length>0){generatePDF();}},[tourData]);var generatePDF=function generatePDF(){var pages=document.getElementById('container');html2PDF(pages,{jsPDF:{format:'a4'},html2canvas:{scrollX:0,scrollY:-window.scrollY},watermark:{handler:function handler(_ref){var pdf=_ref.pdf,imgNode=_ref.imgNode,pageNumber2=_ref.pageNumber2,totalPageNumber=_ref.totalPageNumber;var props=pdf.getImageProperties(imgNode);// do something...\npdf.addImage(imgNode,'PNG',0,0,40,40);}},imageType:'image/png',output:'./AgentFlyer.pdf'});};//const myTimeout = setTimeout(generatePDF, 2000);\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{class:\"container\",id:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row\",style:{display:\"flex\",justifyContent:\"center\",alignItem:\"center\",width:\"100%\",height:\"auto\"},children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-7 col-md-7\",style:{backgroundColor:\"rgb(0, 174, 229)\",marginLeft:\"10px\"},children:/*#__PURE__*/_jsxs(\"p\",{style:{color:\"white\",textAlign:\"center\",width:\"100%\",lineHeight:\"80px\"},children:[\"TEST\",/*#__PURE__*/_jsx(\"br\",{}),Object.keys(tourData).length>0?/*#__PURE__*/_jsxs(\"span\",{style:{textTransform:\"uppercase\"},children:[tourData.city,\" \",tourData.countryname]}):/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:250,height:100,style:{background:\"#bbbbbb\",margin:\"0 auto\"}})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-4 col-md-4\",style:{backgroundColor:\"rgb(52, 52, 52)\",marginLeft:\"10px\"},children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"img\",{src:photo,width:\"80px\",height:\"80px\",style:{border:\"2px solid white\",margin:\"5px\"}}),/*#__PURE__*/_jsx(\"img\",{src:logo1,width:\"80px\",height:\"100px\",style:{border:\"2px solid white\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",width:'100%',color:\"white\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\",marginBottom:\"0px\"},children:Object.keys(tourData).length>0?/*#__PURE__*/_jsxs(\"span\",{style:{textTransform:\"capitalize\"},children:[tourData.caption,\" \",tourData.countryname]}):/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:250,height:60,style:{background:\"#bbbbbb\",margin:\"0 auto\"}})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\",marginBottom:\"0px\"},children:\"Test New Company\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"123-111-2232\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\",width:'100%',color:\"white\"},children:/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"Lic# MS03212s\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",style:{display:\"flex\",justifyContent:\"center\",alignItem:\"center\",width:\"100%\",marginTop:\"05px\"},children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-7 col-md-7\",style:{marginLeft:\"10px\",backgroundImage:\"url(\"+logo+\")\",backgroundSize:\"cover\",backgroundPosition:\"fixed\",height:\"500px\"}}),/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-4 col-md-4\",style:{backgroundColor:\"rgb(0, 174, 229)\",marginLeft:\"10px\"},children:/*#__PURE__*/_jsx(\"h5\",{})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"row\",style:{display:\"flex\",justifyContent:\"center\",alignItem:\"center\",width:\"100%\",height:\"250px\",marginTop:\"05px\"},children:[/*#__PURE__*/_jsxs(\"div\",{class:\"col-lg-7 col-md-7\",style:{backgroundColor:\"rgb(0, 174, 229)\",marginLeft:\"10px\"},children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Offered At: c$36,587,648\"}),/*#__PURE__*/_jsx(\"h6\",{children:\"Features\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-around\",alignItem:\"center\",width:\"100%\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\" BEDROOMS :\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"BATHROOMS :\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"GARAGE\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"YEAR BUILT :\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"LOT SIZE:\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"INTERIOR SQ. FT :\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"col-lg-4 col-md-4\",style:{backgroundColor:\"rgb(52, 52, 52)\",marginLeft:\"10px\"},children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",flexDirection:\"column\",marginTop:\"80px\"},children:[/*#__PURE__*/_jsx(\"p\",{class:\"img_set_para\",children:/*#__PURE__*/_jsx(\"a\",{style:{color:\"black\"},children:/*#__PURE__*/_jsxs(\"span\",{style:{color:\"\",textDecoration:\"underline\",fontStyle:\"italic\",marginBottom:\"5px\"},children:[\"https://virtualtourcafe.com/agent-flyer-tour/\",link]})})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"white\"},children:\"All information deemed reliable, but not guaranteed.\"})]})})})]})]})}),/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:\"top\",horizontal:\"right\"},open:openSuccess,autoHideDuration:3000,onClose:handleClose,children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:\"success\",children:message})}),/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:\"top\",horizontal:\"right\"},open:openError,autoHideDuration:3000,onClose:handleClose,children:/*#__PURE__*/_jsx(Alert,{onClose:handleClose,severity:\"error\",children:message})})]});}","map":{"version":3,"sources":["C:/Users/user/Desktop/Uma/vtc/src/views/Dashboard/Agent/AgentDownloadFlyer.js"],"names":["React","useState","useEffect","useContext","Recorder","Snackbar","MuiAlert","axios","Dialog","DialogTitle","DialogContent","banner","Grid","DateFnsUtils","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","up_img","middle_img","bottom_img","man","house_img","CancelIcon","HighlightOffIcon","AddIcon","SaveIcon","Footer","AgentHeader","Skeleton","Link","useHistory","AuthContext","APIURL","APIPath","postRecord","logo","photo","logo1","html2PDF","APIGetViewFlyerData","Alert","props","AgentDownloadFlyer","flyerId","match","params","flyerid","dispatch","context","history","sync","setSync","openError","setOpenError","openSuccess","setOpenSuccess","message","setMessage","tourData","setTourData","link","setLink","handleClose","event","reason","state","user","objusr","authenticate_key","tourId","agent_id","JSON","parse","agentId","then","res","data","response","status","tourid","Object","keys","length","generatePDF","pages","document","getElementById","jsPDF","format","html2canvas","scrollX","scrollY","window","watermark","handler","pdf","imgNode","pageNumber2","totalPageNumber","getImageProperties","addImage","imageType","output","display","justifyContent","alignItem","width","height","backgroundColor","marginLeft","color","textAlign","lineHeight","textTransform","city","countryname","background","margin","alignItems","border","marginBottom","caption","marginTop","backgroundImage","backgroundSize","backgroundPosition","flexDirection","textDecoration","fontStyle","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Recorder } from 'react-voice-recorder'\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport axios from \"axios\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport banner from \"../../../images/vtc-banner.jpg\";\nimport Grid from '@material-ui/core/Grid';\nimport DateFnsUtils from '@date-io/date-fns';\nimport {\n    MuiPickersUtilsProvider,\n    KeyboardTimePicker,\n    KeyboardDatePicker,\n} from '@material-ui/pickers';\nimport up_img from \"../../../images/up.png\";\nimport middle_img from \"../../../images/middle.png\";\nimport bottom_img from \"../../../images/bottom.png\";\nimport man from \"../../../images/man.png\";\nimport house_img from \"../../../images/house-img.jpg\";\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport Footer from \"../../../components/Footer/AgentFooter\";\nimport AgentHeader from \"../Header/AgentHeader\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { Link, useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../../../CommonMethods/Authentication\";\nimport { APIURL, APIPath } from \"../../../CommonMethods/Fetch\";\nimport { postRecord } from \"../../../CommonMethods/Save\";\nimport logo from \"../../../images/wallpaper.jpg\";\nimport photo from \"../../../images/photo.jpg\";\nimport logo1 from \"../../../images/logo.jpg\"\nimport html2PDF from 'jspdf-html2canvas';\nconst APIGetViewFlyerData = APIURL() + \"view-flyer\";\nfunction Alert(props) {\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nexport default function AgentDownloadFlyer(props) {\n    const flyerId = props.match.params.flyerid;\n    const { dispatch } = useContext(AuthContext);\n\n    const context = useContext(AuthContext);\n    let history = useHistory();\n    const [sync, setSync] = useState(true);\n    const [openError, setOpenError] = useState(false);\n    const [openSuccess, setOpenSuccess] = useState(false);\n    const [message, setMessage] = useState(\"\");\n    const [tourData, setTourData] = useState({});\n    const [link, setLink] = useState(\"\");\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return;\n        }\n        setOpenSuccess(false);\n        setOpenError(false);\n    };\n\n    useEffect(() => {\n        if (context.state.user) {\n            const objusr = { authenticate_key: \"abcd123XYZ\", tourId: flyerId, agent_id: JSON.parse(context.state.user).agentId };\n            postRecord(APIGetViewFlyerData, objusr)\n                .then(res => {\n                    if (res.data[0].response.status === \"success\") {\n                        setTourData(res.data[0].response.tourData)\n                        setLink(res.data[0].response.tourData.tourid);\n                    }\n                })\n        }\n    }, [sync, context.state.user, flyerId]);\n    useEffect(() => {\n        if (Object.keys(tourData).length>0){\n            generatePDF();\n        } \n    }, [tourData]);\n    const generatePDF = () => {\n        const pages = document.getElementById('container');\n        html2PDF(pages, {\n            jsPDF: {\n                format: 'a4',\n            },\n            html2canvas: {\n                scrollX: 0,\n                scrollY: -window.scrollY,\n            },\n            watermark: {\n                handler({ pdf, imgNode, pageNumber2, totalPageNumber }) {\n                    const props = pdf.getImageProperties(imgNode);\n                    // do something...\n                    pdf.addImage(imgNode, 'PNG', 0, 0, 40, 40);\n                },\n            },\n            imageType: 'image/png',\n            output: './AgentFlyer.pdf'\n        });\n    }\n    \n    //const myTimeout = setTimeout(generatePDF, 2000);\n\n    return (\n        <>\n            <div class=\"container\" id=\"container\">\n                <div class=\"container-fluid\"  >\n                    <div class=\"row\" style={{ display: \"flex\", justifyContent: \"center\", alignItem: \"center\", width: \"100%\", height: \"auto\" }}>\n                        <div class=\"col-lg-7 col-md-7\" style={{ backgroundColor: \"rgb(0, 174, 229)\", marginLeft: \"10px\" }} >\n                            <p style={{ color: \"white\", textAlign: \"center\", width: \"100%\", lineHeight: \"80px\" }}>\n                                TEST<br></br>\n                                {Object.keys(tourData).length > 0 ? (\n                                    <span style={{ textTransform: \"uppercase\" }}>{tourData.city} {tourData.countryname}</span>\n                                ) : (\n                                    <Skeleton variant=\"text\" width={250} height={100} style={{ background: \"#bbbbbb\", margin: \"0 auto\" }} />\n                                )}\n                            </p>\n                        </div>\n                        <div class=\"col-lg-4 col-md-4\" style={{ backgroundColor: \"rgb(52, 52, 52)\", marginLeft: \"10px\" }}>\n                            <div class=\"row\">\n                                <div style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\", width: \"100%\" }}>\n                                    <img src={photo} width=\"80px\" height=\"80px\" style={{ border: \"2px solid white\", margin: \"5px\" }}></img>\n                                    <img src={logo1} width=\"80px\" height=\"100px\" style={{ border: \"2px solid white\" }}></img>\n                                </div>\n                                <div style={{ textAlign: \"center\", width: '100%', color: \"white\" }}>\n                                    <p style={{ color: \"white\", marginBottom: \"0px\" }}>\n                                        {Object.keys(tourData).length > 0 ? (\n                                            <span style={{ textTransform: \"capitalize\" }}>{tourData.caption} {tourData.countryname}</span>\n                                        ) : (\n                                            <Skeleton variant=\"text\" width={250} height={60} style={{ background: \"#bbbbbb\", margin: \"0 auto\" }} />\n                                        )}\n                                    </p>\n                                    <p style={{ color: \"white\", marginBottom: \"0px\" }}>Test New Company\n                                    </p >\n                                    <p style={{ color: \"white\" }}>123-111-2232</p>\n                                </div>\n                                <div style={{ textAlign: \"center\", width: '100%', color: \"white\" }}>\n                                    <p style={{ color: \"white\" }}>Lic# MS03212s</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"row\" style={{ display: \"flex\", justifyContent: \"center\", alignItem: \"center\", width: \"100%\", marginTop: \"05px\" }}>\n                        <div class=\"col-lg-7 col-md-7\" style={{ marginLeft: \"10px\", backgroundImage: \"url(\" + logo + \")\", backgroundSize: \"cover\", backgroundPosition: \"fixed\", height: \"500px\" }} >\n\n                        </div>\n                        <div class=\"col-lg-4 col-md-4\" style={{ backgroundColor: \"rgb(0, 174, 229)\", marginLeft: \"10px\" }}>\n                            <h5></h5>\n                        </div>\n                    </div>\n                    <div class=\"row\" style={{ display: \"flex\", justifyContent: \"center\", alignItem: \"center\", width: \"100%\", height: \"250px\", marginTop: \"05px\" }}>\n                        <div class=\"col-lg-7 col-md-7\" style={{ backgroundColor: \"rgb(0, 174, 229)\", marginLeft: \"10px\" }} >\n                            <h5>\n                                Offered At: c$36,587,648\n                            </h5>\n                            <h6>Features</h6>\n                            <div style={{ display: \"flex\", justifyContent: \"space-around\", alignItem: \"center\", width: \"100%\" }} >\n                                <div>\n                                    <p style={{ color: \"white\" }}> BEDROOMS :</p>\n                                    <p style={{ color: \"white\" }}>BATHROOMS :</p>\n                                    <p style={{ color: \"white\" }}>GARAGE</p>\n                                </div>\n                                <div>\n                                    <p style={{ color: \"white\" }}>YEAR BUILT :</p>\n                                    <p style={{ color: \"white\" }}>LOT SIZE:</p>\n                                    <p style={{ color: \"white\" }}>INTERIOR SQ. FT :</p>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"col-lg-4 col-md-4\" style={{ backgroundColor: \"rgb(52, 52, 52)\", marginLeft: \"10px\" }}>\n                            <div class=\"row\">\n                                <div style={{ textAlign: \"center\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", flexDirection: \"column\", marginTop: \"80px\" }}>\n                                    {/* <p style={{ color: \"white\" }}>https://virtualtourcafe.com/tour/4778003</p> */}\n                                    <p class=\"img_set_para\">\n                                        <a style={{ color: \"black\" }}><span style={{ color: \"\", textDecoration: \"underline\", fontStyle: \"italic\", marginBottom: \"5px\" }}>https://virtualtourcafe.com/agent-flyer-tour/{link}</span></a>\n                                    </p>\n                                    <p style={{ color: \"white\" }}>All information deemed reliable, but not guaranteed.</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n            </div>\n            <Snackbar anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }} open={openSuccess} autoHideDuration={3000} onClose={handleClose}>\n                <Alert onClose={handleClose} severity=\"success\">\n                    {message}\n                </Alert>\n            </Snackbar>\n            <Snackbar anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }} open={openError} autoHideDuration={3000} onClose={handleClose}>\n                <Alert onClose={handleClose} severity=\"error\">\n                    {message}\n                </Alert>\n            </Snackbar>\n        </>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}