{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _utils = require(\"./utils\");\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar PopupWindow = /*#__PURE__*/function () {\n  function PopupWindow(id, url) {\n    var popupOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var otherOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, PopupWindow);\n\n    this.id = id;\n    this.url = url;\n    this.popupOptions = popupOptions;\n    this.locationKey = otherOptions.locationKey;\n    this.isCrossOrigin = otherOptions.isCrossOrigin;\n    this.response = null;\n    this.handlePostMessage = this.handlePostMessage.bind(this);\n  }\n\n  _createClass(PopupWindow, [{\n    key: \"handlePostMessage\",\n    value: function handlePostMessage(event) {\n      if (event.data.message === 'deliverResult') {\n        this.response = event.data.result;\n      }\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var url = this.url,\n          id = this.id,\n          popupOptions = this.popupOptions,\n          isCrossOrigin = this.isCrossOrigin;\n\n      if (isCrossOrigin) {\n        window.addEventListener('message', this.handlePostMessage);\n      }\n\n      this.window = window.open(url, id, (0, _utils.toQuery)(popupOptions, ','));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.cancel();\n      this.window.close();\n      window.removeEventListener('message', this.handlePostMessage);\n    }\n  }, {\n    key: \"poll\",\n    value: function poll() {\n      var _this = this;\n\n      this.promise = new Promise(function (resolve, reject) {\n        _this.iid = window.setInterval(function () {\n          try {\n            var popup = _this.window;\n\n            if (!popup || popup.closed !== false) {\n              _this.close();\n\n              reject(new Error('The popup was closed for an unexpected reason'));\n              return;\n            } // Cross origin auth flows need to be handled differently\n\n\n            if (_this.isCrossOrigin) {\n              if (_this.response) {\n                resolve(_this.response);\n\n                _this.close();\n              } else {\n                popup.postMessage({\n                  message: 'requestResult'\n                }, '*');\n                return;\n              }\n            } else {\n              if (popup.location.href === _this.url || popup.location.pathname === 'blank') {\n                // location unchanged, still polling\n                return;\n              }\n\n              if (!['search', 'hash'].includes(_this.locationKey)) {\n                reject(new Error(\"Cannot get data from location.\".concat(_this.locationKey, \", check the responseType prop\")));\n\n                _this.close();\n\n                return;\n              }\n\n              var locationValue = popup.location[_this.locationKey];\n              var params = (0, _utils.toParams)(locationValue);\n              resolve(params);\n\n              _this.close();\n            }\n          } catch (error) {\n            // Log the error to the console but remain silent\n            if (error.name === 'SecurityError' && error.message.includes('Blocked a frame with origin')) {\n              console.warn('Encountered a cross-origin error, is your authorization URL on a different server? Use the \"isCrossOrigin\" property, see documentation for details.');\n            } else {\n              console.error(error);\n            }\n          }\n        }, 500);\n      });\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this.iid) {\n        window.clearInterval(this.iid);\n        this.iid = null;\n      }\n    }\n  }, {\n    key: \"then\",\n    value: function then() {\n      var _this$promise;\n\n      return (_this$promise = this.promise).then.apply(_this$promise, arguments);\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch() {\n      var _this$promise2;\n\n      return (_this$promise2 = this.promise)[\"catch\"].apply(_this$promise2, arguments);\n    }\n  }], [{\n    key: \"open\",\n    value: function open() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var popup = _construct(this, args);\n\n      popup.open();\n      popup.poll();\n      return popup;\n    }\n  }]);\n\n  return PopupWindow;\n}();\n\nvar _default = PopupWindow;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/user/Desktop/Uma/vtc/node_modules/react-simple-oauth2-login/dist/PopupWindow.js"],"names":["Object","defineProperty","exports","value","_utils","require","_construct","Parent","args","Class","_isNativeReflectConstruct","Reflect","construct","a","push","apply","Constructor","Function","bind","instance","_setPrototypeOf","prototype","arguments","sham","Proxy","Boolean","valueOf","call","e","o","p","setPrototypeOf","__proto__","_classCallCheck","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","PopupWindow","id","url","popupOptions","undefined","otherOptions","locationKey","isCrossOrigin","response","handlePostMessage","event","data","message","result","open","window","addEventListener","toQuery","close","cancel","removeEventListener","poll","_this","promise","Promise","resolve","reject","iid","setInterval","popup","closed","Error","postMessage","location","href","pathname","includes","concat","locationValue","params","toParams","error","name","console","warn","clearInterval","then","_this$promise","_catch","_this$promise2","_len","Array","_key","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _utils = require(\"./utils\");\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar PopupWindow = /*#__PURE__*/function () {\n  function PopupWindow(id, url) {\n    var popupOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var otherOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, PopupWindow);\n\n    this.id = id;\n    this.url = url;\n    this.popupOptions = popupOptions;\n    this.locationKey = otherOptions.locationKey;\n    this.isCrossOrigin = otherOptions.isCrossOrigin;\n    this.response = null;\n    this.handlePostMessage = this.handlePostMessage.bind(this);\n  }\n\n  _createClass(PopupWindow, [{\n    key: \"handlePostMessage\",\n    value: function handlePostMessage(event) {\n      if (event.data.message === 'deliverResult') {\n        this.response = event.data.result;\n      }\n    }\n  }, {\n    key: \"open\",\n    value: function open() {\n      var url = this.url,\n          id = this.id,\n          popupOptions = this.popupOptions,\n          isCrossOrigin = this.isCrossOrigin;\n\n      if (isCrossOrigin) {\n        window.addEventListener('message', this.handlePostMessage);\n      }\n\n      this.window = window.open(url, id, (0, _utils.toQuery)(popupOptions, ','));\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.cancel();\n      this.window.close();\n      window.removeEventListener('message', this.handlePostMessage);\n    }\n  }, {\n    key: \"poll\",\n    value: function poll() {\n      var _this = this;\n\n      this.promise = new Promise(function (resolve, reject) {\n        _this.iid = window.setInterval(function () {\n          try {\n            var popup = _this.window;\n\n            if (!popup || popup.closed !== false) {\n              _this.close();\n\n              reject(new Error('The popup was closed for an unexpected reason'));\n              return;\n            } // Cross origin auth flows need to be handled differently\n\n\n            if (_this.isCrossOrigin) {\n              if (_this.response) {\n                resolve(_this.response);\n\n                _this.close();\n              } else {\n                popup.postMessage({\n                  message: 'requestResult'\n                }, '*');\n                return;\n              }\n            } else {\n              if (popup.location.href === _this.url || popup.location.pathname === 'blank') {\n                // location unchanged, still polling\n                return;\n              }\n\n              if (!['search', 'hash'].includes(_this.locationKey)) {\n                reject(new Error(\"Cannot get data from location.\".concat(_this.locationKey, \", check the responseType prop\")));\n\n                _this.close();\n\n                return;\n              }\n\n              var locationValue = popup.location[_this.locationKey];\n              var params = (0, _utils.toParams)(locationValue);\n              resolve(params);\n\n              _this.close();\n            }\n          } catch (error) {\n            // Log the error to the console but remain silent\n            if (error.name === 'SecurityError' && error.message.includes('Blocked a frame with origin')) {\n              console.warn('Encountered a cross-origin error, is your authorization URL on a different server? Use the \"isCrossOrigin\" property, see documentation for details.');\n            } else {\n              console.error(error);\n            }\n          }\n        }, 500);\n      });\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      if (this.iid) {\n        window.clearInterval(this.iid);\n        this.iid = null;\n      }\n    }\n  }, {\n    key: \"then\",\n    value: function then() {\n      var _this$promise;\n\n      return (_this$promise = this.promise).then.apply(_this$promise, arguments);\n    }\n  }, {\n    key: \"catch\",\n    value: function _catch() {\n      var _this$promise2;\n\n      return (_this$promise2 = this.promise)[\"catch\"].apply(_this$promise2, arguments);\n    }\n  }], [{\n    key: \"open\",\n    value: function open() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var popup = _construct(this, args);\n\n      popup.open();\n      popup.poll();\n      return popup;\n    }\n  }]);\n\n  return PopupWindow;\n}();\n\nvar _default = PopupWindow;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}